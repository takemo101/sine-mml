# 連符（n連符）詳細設計

## 概要

本フォルダには、F-032（連符）機能の詳細設計書を格納します。

## 関連文書

- **要件定義書**: [REQ-CLI-006_MIDI-Streaming-Tuplet.md](../../../requirements/REQ-CLI-006_MIDI-Streaming-Tuplet.md)
- **基本設計書**: [BASIC-CLI-006_MIDI-Streaming-Tuplet.md](../../basic/BASIC-CLI-006_MIDI-Streaming-Tuplet.md)

## 詳細設計書一覧

| ドキュメントID | 名称 | ファイル | ステータス |
|----------------|------|---------|------------|
| DET-TUP-001 | 連符詳細設計書（統合版） | [詳細設計書.md](./詳細設計書.md) | ✅ 作成済み |

> **Note**: 本機能は統合版の詳細設計書として作成されています。トークン定義、AST拡張、パーサー、音長計算、エラーハンドリングの全てを1つのドキュメントに統合しています。

## 機能概要

- `{CDE}3` で3連符（3音を1拍に収める）
- `{CDEF}4` で4連符
- `{CDE}3:2` で2分音符ベースの3連符
- `{{CDE}3 FG}5` でネストした連符（最大5階層）
- 休符・タイ記号との組み合わせ対応

## MML構文

```
{<音符>...}n         # 連符
{<音符>...}n:m       # ベース音長指定の連符
```

## エラーコード

| コード | 説明 |
|--------|------|
| MML-E020 | 連符の閉じ括弧がない |
| MML-E021 | 連符数が指定されていない |
| MML-E022 | 無効な連符数（2未満） |
| MML-E023 | 連符のネスト深度超過（6階層以上） |
